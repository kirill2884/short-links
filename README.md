
# README — SHORT LINK (NEST + REACT)

## ОПИСАНИЕ ПРОЕКТА

Это тестовый проект **Short link**, использующий **Nest** с интеграцией **React** для реализации динамических компонентов веб-приложения.  
Проект включает использование **MPostgreSQL** для хранения данных.

## ОСНОВНОЙ ФУНКЦИОНАЛ

После запуска приложения на главной странице отображается меню с тремя пунктами CREATE SHORTLINK, ANALYTICS, SHORTLINKS. 

## ДОБАВЛЕНИЕ ЗАДАЧИ

Чтобы добавить новую короткую ссылку:

- Перейдите на страницу CREATE SHORTLINK.  
- Заполните поля в форме.  
- Нажмите кнопку подтверждения для создания короткой ссылки.

## ПРОСМОТР СОЗДАННЫХ КОРОТКИХ ССЫЛОК

- Перейдите на страницу SHORTLINKS.  
- Все созданные ссылки отображаются в таблице 

## ПРОСМОТР ИНФОРМАЦИИ О СОЗДАННЫХ КОРОТКИХ ССЫЛКАХ
- Перейдите на страницу SHORTLINKS.  
- В строке с нужной ссылкой нажмите на кнопку "Info" (буква "I" в кружке)
- В открывшемся окне будет отображена информация о короткой ссылке (Original URL, количество переходов) 

## УДАЛЕНИЕ КОРОТКой ССЫЛКИ
- Перейдите на страницу SHORTLINKS.  
- В строке с нужной ссылкой нажмите на кнопку "Delete" (изображение корзины)
- В открывшемся окне подтвердите удаление короткой ссылки 

## ПОЛУЧЕНИЕ АНАЛИТИКИ ПО КОРОТКОЙ ССЫЛКЕ
- Перейдите на страницу ANALYTICS.  
- В поле для ввода введите короткую ссылку или алиас
- Нажмите кнопку "GET ANALYTICS"
- В случае если для данной ссылки найдена аналитика, она будет выведена на экран

Аналитика включает:
    - количество переходов по ссылке
    - последние 5 ip адресов с которых был осуществлен переход


## ТРЕБОВАНИЯ

Для локального запуска проекта необходимо:

- **Node.js** версии 18 или выше  
- **npm** для установки зависимостей  
- **PostgreSQL** для базы данных  

## УСТАНОВКА

### 1. КЛОНИРОВАНИЕ РЕПОЗИТОРИЯ

    ```bash
    git clone https://github.com/kirill2884/short-links.git
    cd <каталог_назначения>

### 2. УСТАНОВКА ЗАВИСИМОСТЕЙ

Для установки всех зависимостей, выполните следующую команду:

    ```bash
    npm install


## ВАЖНО

Для работы проекта необходима СУБД **PostgreSQL**.  
Убедитесь, что **PostgreSQL** работает локально, или используйте **Docker** (см. ниже).

## НАСТРОЙКА ПЕРЕМЕННЫХ ОКРУЖЕНИЯ

Для локального запуска необходим файл `.env` в корне проекта с необходимыми переменными:

- `DATABASE_URL` — адрес для доступа к MySQL базе данных  
  Пример: "postgresql://myuser:mypassword@localhost:5432/shortlinks?schema=public"
  
- `PORT` — порт, на котором будет работать приложение (по умолчанию 3001)  
  Пример: `PORT=3002` (опционально)

## ЛОКАЛЬНЫЙ ЗАПУСК
1. Убедитесь, что **PostgreSQL** запущена на вашем локальном компьютере.
2. Выполните миграцию базы данных с помощью команды:
   ```bash
   npx prisma migrate deploy


## ВАЖНО
Если вы вносили изменения в схему базы данных, используйте команду:

    ```bash
    npx prisma migrate dev

3. Запустите приложение backend:
    ```bash
    npm start

    После этого сервер будет доступен по адресу http://localhost:3001, если вы не указали другой порт в переменных среды.

3. Запустите приложение frontend:
    ```bash
    npm start

    После этого фронт приложение будет доступно по адресу http://localhost:3000, если вы не указали другой порт.

## ЗАПУСК В DOCKER

Чтобы запустить проект в Docker:

1 Убедитесь, что у вас настроены переменные окружения в файле docker-compose.yml.
2 Выполните команду:
    ```bash
    docker-compose up -d 

Контейнеры  db_short_link, nest-backend и react-frontend будут созданы и запущены. 
Миграции базы данных будут автоматически применены при запуске контейнера.
После запуска контейнеров приложение будет доступно по порту, указанному в Docker-контейнере react-frontend.

## ЗАПУСК ТЕСТОВ
Для запуска тестов **backend** используйте команду 
    ```bash
    npm test
    npm test:e2e